{
  "name": "ChoombasProject",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {
          "download": true
        }
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -448,
        912
      ],
      "id": "610a01d2-13ce-4854-98b9-5288db769266",
      "name": "Telegram Trigger",
      "webhookId": "e596cc95-30dd-4a70-a183-2b077a66a367",
      "credentials": {
        "telegramApi": {
          "id": "FNd5VUe1tZm8dvAH",
          "name": "AkademChoombas_bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.document }}",
                    "rightValue": "",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "db1dfcac-76a8-41d2-a7f9-557e2227c6e8"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "document"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ae67b6c1-ed20-4651-be20-a7e64c630ec2",
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "/start",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "start"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -224,
        912
      ],
      "id": "66e54307-12b4-4ccd-90f6-dca792e64c30",
      "name": "Switch"
    },
    {
      "parameters": {
        "binaryPropertyName": "=data"
      },
      "name": "Read PDF",
      "type": "n8n-nodes-base.readPDF",
      "position": [
        80,
        912
      ],
      "typeVersion": 1,
      "id": "c65835b3-8626-446a-bf55-3c756bfefc61"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://5.130.46.22:1212/generate/",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-key",
              "value": "BC1AD4CB882253B3A9F51A69D50A2F64"
            },
            {
              "name": "x-secret",
              "value": "A3039B34726711ADBEF47CA237EC67CF"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "prompt",
              "value": "={{ $json.prompt }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1280,
        640
      ],
      "id": "a532c7f4-0688-4ff5-be57-c318e3cdde86",
      "name": "HTTP Request - Generate",
      "executeOnce": false
    },
    {
      "parameters": {
        "url": "=https://api-key.fusionbrain.ai/key/api/v1/pipeline/status/{{$json.uuid}}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Key",
              "value": "Key BC1AD4CB882253B3A9F51A69D50A2F64"
            },
            {
              "name": "X-Secret",
              "value": "Secret A3039B34726711ADBEF47CA237EC67CF"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1504,
        640
      ],
      "id": "b00ec7d2-eab9-499a-b7aa-06003934d0de",
      "name": "HTTP Request4",
      "retryOnFail": true,
      "maxTries": 5,
      "waitBetweenTries": 500,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0620c054-2b60-4122-bcd7-bac089e6e4d5",
              "leftValue": "={{ $json.status }}",
              "rightValue": "DONE",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1728,
        640
      ],
      "id": "e3c1b0e9-efaf-47b9-b15a-d00a72dec6cc",
      "name": "If1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2000,
        752
      ],
      "id": "45a0c250-0a84-4e87-8e0c-6a5216b32cfc",
      "name": "Wait1",
      "webhookId": "aab7e75a-7a6c-48fb-8bc5-252976be3051"
    },
    {
      "parameters": {
        "operation": "toBinary",
        "sourceProperty": "=result.files[0]",
        "binaryPropertyName": "frame",
        "options": {
          "fileName": "frame.png"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        2208,
        624
      ],
      "id": "9105de49-550c-443f-a342-acc84f51056e",
      "name": "Convert to File1"
    },
    {
      "parameters": {
        "jsCode": "const result = [];\n\nfor (const item of items) {\n  const out = $item(\"0\").$node[\"If\"].json[\"output\"];\n  try {\n    let arr = JSON.parse(out);\n    if (typeof arr === 'string') arr = JSON.parse(arr); // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π\n    if (!Array.isArray(arr)) {\n      // –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –º–∞—Å—Å–∏–≤ ‚Äî –ø–æ–ª–æ–∂–∏–º –∫–∞–∫ –æ–¥–∏–Ω item\n      result.push({ json: arr });\n    } else {\n      for (const obj of arr) {\n        result.push({ json: obj });\n      }\n    }\n  } catch (err) {\n    // –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π item —Å –æ—à–∏–±–∫–æ–π\n    result.push({ json: { _original_output: out, _parse_error: err.message } });\n  }\n}\n\nreturn result;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1008,
        976
      ],
      "id": "dc1fce2a-502e-4163-acde-8c837ac2e8dd",
      "name": "GenearteJSON"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–°—Ñ–æ—Ä–º–∏—Ä—É–π –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –≤ —Ç–≤–æ–µ–π —Ä–æ–ª–∏, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ç–µ–∫—Å—Ç: \"{{ $json.info.Title || \"\" }} {{ $json.text }}\"",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=**–†–û–õ–¨ –ò –¶–ï–õ–¨**\n–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–¥—Ä–æ–≤ –∫–æ–º–∏–∫—Å–∞. –¢–≤–æ—è –∑–∞–¥–∞—á–∞: —Ä–∞–∑–±–∏—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω—ã –∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã –≤—ã–≤–µ—Å—Ç–∏ –û–î–ò–ù JSON-–æ–±—ä–µ–∫—Ç —Å —Ä–æ–≤–Ω–æ —á–µ—Ç—ã—Ä—å–º—è –ø–æ–ª—è–º–∏.\n\n**–°–¢–†–û–ì–ò–ô –§–û–†–ú–ê–¢ –í–´–í–û–î–ê**\n*   –ú–∞—Å—Å–∏–≤ JSON-–æ–±—ä–µ–∫—Ç–æ–≤. –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–≥–æ:\n    {\n      \"prompt\": \"[–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –î–õ–ò–ù–ê –ù–ï –î–û–õ–ñ–ù–ê –ü–†–ï–í–´–®–ê–¢–¨ 400 –°–ò–ú–í–û–õ–û–í!]\",\n      \"negative_prompt\": \"—Ç–µ–∫—Å—Ç, –Ω–∞–¥–ø–∏—Å–∏, –ª–æ–≥–æ—Ç–∏–ø—ã, —Ä–µ—á–µ–≤—ã–µ –ø—É–∑—ã—Ä–∏, –±—Ä–µ–Ω–¥—ã, –Ω–∞—Å–∏–ª–∏–µ, –æ—Ä—É–∂–∏–µ, –∫—Ä–æ–≤—å, —Å–µ–∫—Å, –æ–±–Ω–∞–∂–µ–Ω–∫–∞, –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏, –ø–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã\",\n      \"father_line\": \"[—Ä–µ–ø–ª–∏–∫–∞ –æ—Ç—Ü–∞]\",\n      \"son_line\": \"[—Ä–µ–ø–ª–∏–∫–∞ —Å—ã–Ω–∞]\"\n    }\n\n**–ñ–ï–°–¢–ö–ò–ï –ü–†–ê–í–ò–õ–ê –î–õ–Ø –ü–û–õ–Ø `prompt`**\n1.  **–Ø–∑—ã–∫ –∏ –¥–ª–∏–Ω–∞:** –¢–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º. **–°—Ç—Ä–æ–≥–æ –¥–æ 400 —Å–∏–º–≤–æ–ª–æ–≤.** –ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∞ ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—è—è —Å—É—Ç—å.\n2.  **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `prompt` (—Å–æ–±–ª—é–¥–∞–π –ø–æ—Ä—è–¥–æ–∫):**\n    *   **–°—Ç—Ä–æ–∫–∞ 1 (–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫):** `\"–û—Ç–µ—Ü: –∫–æ–∂–∞–Ω—ã–π –ø–ª–∞—â, —Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Å–≤–∏—Ç–µ—Ä, —á–∞—Å—ã –Ω–∞ –ª–µ–≤–æ–π —Ä—É–∫–µ, —à—Ä–∞–º —É –±—Ä–æ–≤–∏. –°—ã–Ω: –¥–∂–∏–Ω—Å–æ–≤–∞—è –∫—É—Ä—Ç–∫–∞ —Å –Ω–∞—à–∏–≤–∫–∞–º–∏, –±–µ–ª–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞, —Ä—é–∫–∑–∞–∫ –Ω–∞ –ø–ª–µ—á–µ.\"` (–≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–µ–∏–∑–º–µ–Ω–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –∫–∞–¥—Ä–æ–≤).\n    *   **–°—Ç—Ä–æ–∫–∞ 2 (–õ–æ–∫–∞—Ü–∏—è –∏ —Ñ–æ–Ω):** –ö—Ä–∞—Ç–∫–æ: `\"–í –≥–∞—Ä–∞–∂–µ: —Å—Ç–∞—Ä—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –≤–µ—Ä—Å—Ç–∞–∫ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, —Å—Ç–µ–ª–ª–∞–∂ —Å –¥–µ—Ç–∞–ª—è–º–∏.\"`\n    *   **–°—Ç—Ä–æ–∫–∞ 3 (–ü–æ–∑–∏—Ü–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏–µ):** –£–∫–∞–∑–∞—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (—Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞/—Ü–µ–Ω—Ç—Ä), –æ—Å–Ω–æ–≤–Ω—É—é –ø–æ–∑—É (—Å—Ç–æ–∏—Ç/—Å–∏–¥–∏—Ç/–Ω–∞–∫–ª–æ–Ω–µ–Ω) –∏ –∫–ª—é—á–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. *–ü—Ä–∏–º–µ—Ä: \"–û—Ç–µ—Ü —Å–ø—Ä–∞–≤–∞, —Å—Ç–æ–∏—Ç —É –≤–µ—Ä—Å—Ç–∞–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—å. –°—ã–Ω —Å–ª–µ–≤–∞, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ.\"*\n    *   **–°—Ç—Ä–æ–∫–∞ 4 (–ú–∏–º–∏–∫–∞ –∏ –ø–ª–∞–Ω):** –û–ø–∏—Å–∞—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü –∏ –æ–±—â–∏–π –ø–ª–∞–Ω –∫–∞–¥—Ä–∞. *–ü—Ä–∏–º–µ—Ä: \"–û—Ç–µ—Ü —É–ª—ã–±–∞–µ—Ç—Å—è, —Å—ã–Ω —Å–º–æ—Ç—Ä–∏—Ç —Å –∏–Ω—Ç–µ—Ä–µ—Å–æ–º. –°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω.\"*\n3.  **–ó–∞–ø—Ä–µ—â–µ–Ω–æ:** –£–ø–æ–º–∏–Ω–∞—Ç—å —Å—Ç–∏–ª—å rendering'–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"–≤ —Å—Ç–∏–ª–µ –∞–Ω–∏–º–µ\"), –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–µ–≥–∏ –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò. –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.\n\n**–ö–û–ù–°–ò–°–¢–ï–ù–¢–ù–û–°–¢–¨ –ü–ï–†–°–û–ù–ê–ñ–ï–ô**\n–ù–∞—á–∞–ª—å–Ω—ã–π –±–ª–æ–∫-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (`\"–û—Ç–µ—Ü: –∫–æ–∂–∞–Ω—ã–π –ø–ª–∞—â... –°—ã–Ω: –¥–∂–∏–Ω—Å–æ–≤–∞—è –∫—É—Ä—Ç–∫–∞...\"`) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ `prompt`** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.\n\n**–°–¢–†–ê–¢–ï–ì–ò–Ø –°–û–ö–†–ê–©–ï–ù–ò–Ø –î–û 400 –°–ò–ú–í–û–õ–û–í (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)**\n–ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∞, —Å–æ–∫—Ä–∞—â–∞–π –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:\n1.  **–°–æ—Ö—Ä–∞–Ω–∏** –±–ª–æ–∫-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏ –∫–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.\n2.  **–°–æ–∫—Ä–∞—Ç–∏** –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ–Ω–∞ –¥–æ 2-—Ö —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤.\n3.  **–£–ø—Ä–æ—Å—Ç–∏** –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∑, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–ª—å–∫–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"—Ä—É–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç\" –≤–º–µ—Å—Ç–æ \"–ø—Ä–∞–≤–∞—è —Ä—É–∫–∞ –≤—ã—Ç—è–Ω—É—Ç–∞, —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–ª–µ—Ü –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω\").\n4.  **–û–±—ä–µ–¥–∏–Ω–∏** –ø—É–Ω–∫—Ç—ã –æ –º–∏–º–∏–∫–µ –∏ –¥–µ–π—Å—Ç–≤–∏–∏ –≤ –æ–¥–Ω–æ –∫–æ—Ä–æ—Ç–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.\n\n**–†–ï–ü–õ–ò–ö–ò**\n*   `son_line`: –õ—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–∞—è, —É—Ç–æ—á–Ω—è—é—â–∞—è, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞.\n*   `father_line`: –ú—É–¥—Ä–∞—è, —è—Å–Ω–∞—è, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è —Ñ—Ä–∞–∑–∞.\n*   –ö–∞–∂–¥–∞—è —Ä–µ–ø–ª–∏–∫–∞ ‚Äî –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—É—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –±–ª–æ–∫–∞.\n\n**–ü–†–ò–ú–ï–† (–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–æ–≤–æ–º—É –ª–∏–º–∏—Ç—É –≤ 400 —Å–∏–º–≤–æ–ª–æ–≤)**\n{\n  \"prompt\": \"–û—Ç–µ—Ü: –∫–æ–∂–∞–Ω—ã–π –ø–ª–∞—â, —Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Å–≤–∏—Ç–µ—Ä, —á–∞—Å—ã –Ω–∞ –ª–µ–≤–æ–π —Ä—É–∫–µ, —à—Ä–∞–º —É –±—Ä–æ–≤–∏. –°—ã–Ω: –¥–∂–∏–Ω—Å–æ–≤–∞—è –∫—É—Ä—Ç–∫–∞ —Å –Ω–∞—à–∏–≤–∫–∞–º–∏, –±–µ–ª–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞, —Ä—é–∫–∑–∞–∫ –Ω–∞ –ø–ª–µ—á–µ. –í –≥–∞—Ä–∞–∂–µ: –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –≤–µ—Ä—Å—Ç–∞–∫. –û—Ç–µ—Ü —Å–ø—Ä–∞–≤–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—å. –°—ã–Ω —Å–ª–µ–≤–∞, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª—É—à–∞–µ—Ç. –û–±–∞ —Å–µ—Ä—å–µ–∑–Ω—ã. –°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω.\",\n  \"negative_prompt\": \"—Ç–µ–∫—Å—Ç, –Ω–∞–¥–ø–∏—Å–∏, –ª–æ–≥–æ—Ç–∏–ø—ã, —Ä–µ—á–µ–≤—ã–µ –ø—É–∑—ã—Ä–∏, –±—Ä–µ–Ω–¥—ã, –Ω–∞—Å–∏–ª–∏–µ, –æ—Ä—É–∂–∏–µ, –∫—Ä–æ–≤—å, —Å–µ–∫—Å, –æ–±–Ω–∞–∂–µ–Ω–∫–∞, –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏, –ø–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã\",\n  \"son_line\": \"–û—Ç–µ—Ü, –∞ –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ç–æ—Ç —É–∑–µ–ª, –ø—Ä–æ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –≥–æ–≤–æ—Ä–∏–ª?\"\n  \"father_line\": \"–í–æ—Ç –∑–¥–µ—Å—å —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —É–∑–µ–ª. –ó–∞–ø–æ–º–Ω–∏, –∫–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω.\",\n}\n---\n\n### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏:\n\n1.  **–ñ–µ—Å—Ç–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª–∏–Ω—ã Prmopt'–∞ –Ω–∞ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫:** –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ **400 —Å–∏–º–≤–æ–ª–æ–≤** –≤—ã–Ω–µ—Å–µ–Ω–æ –Ω–∞ –ø–µ—Ä–≤—ã–π –ø–ª–∞–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º.\n2.  **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ß–∏—Å–ª–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö \"—Å—Ç—Ä–æ–∫\" –≤ `prompt` —Å–æ–∫—Ä–∞—â–µ–Ω–æ —Å 6 –¥–æ 4. –≠—Ç–æ —É–±–∏—Ä–∞–µ—Ç –≤–æ–¥–Ω–æ—Å—Ç—å –∏ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –±—ã—Ç—å –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º.\n3.  **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è:** –ß–µ—Ç–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å, –∞ —á–µ–º –∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å. –£–±—Ä–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–æ—á–Ω—ã–º —Ü–∏—Ñ—Ä–∞–º (—Å–º, –≥—Ä–∞–¥—É—Å—ã), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ \"—Å—ä–µ–¥–∞—é—Ç\" –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤.\n4.  **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `negative_prompt`:** –ë–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π, –Ω–æ –æ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –≤—Å–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –¥–æ–±–∞–≤–ª—è—é—â–∏–π —Ç–∏–ø–∏—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (\"–ø–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å\").\n5.  **–û–±—Ä–∞–∑–µ—Ü-–ø—Ä–∏–º–µ—Ä,** –∫–æ—Ç–æ—Ä—ã–π —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ –ª–∏–º–∏—Ç –∏ —Å—Ä–∞–∑—É –∑–∞–¥–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.\n6.  **–£–±—Ä–∞–Ω—ã –ø–æ–≤—Ç–æ—Ä—ã:** –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –±–æ–ª—å—à–µ–π —á–∏—Å—Ç–æ—Ç—ã.\n\n**–ü–û–ú–ù–ò: –í–´–í–û–î –¢–û–õ–¨–ö–û JSON –§–û–†–ú–ê–¢–ê - –í–°–ï, –ö–†–û–ú–ï –ù–ï–ì–û –ó–ê–ü–†–ï–©–ï–ù–û**"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        336,
        912
      ],
      "id": "50a09405-55cf-44c9-9c6b-9c8dcc48460f",
      "name": "AI Agent",
      "executeOnce": false
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "chatgpt-4o-latest",
          "mode": "list",
          "cachedResultName": "chatgpt-4o-latest"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        336,
        1088
      ],
      "id": "59da3a43-ab79-4590-a8e0-dbb940b4ec51",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "ettM9QMfkfBjXifj",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendPhoto",
        "chatId": "={{ $item(\"0\").$node[\"Telegram Trigger\"].json[\"message\"][\"from\"][\"id\"] }}",
        "binaryData": true,
        "binaryPropertyName": "=frame",
        "additionalFields": {
          "caption": "=<b>–°—ã–Ω:</b> {{ $json.son_line }}\n\n<b>–û—Ç–µ—Ü:</b> {{ $json.father_line }}",
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2928,
        960
      ],
      "id": "eb299486-fb92-46fa-a0ef-91bc8ed1257f",
      "name": "Send a photo message",
      "webhookId": "4e8a9e94-f230-4310-a9a8-c38839614b74",
      "credentials": {
        "telegramApi": {
          "id": "FNd5VUe1tZm8dvAH",
          "name": "AkademChoombas_bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2624,
        960
      ],
      "id": "84c31d57-5bd8-41ed-98b7-8282b4e0b8b6",
      "name": "Merge1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fb581a70-8b53-4cf9-a543-e5ccbe0f35ed",
              "leftValue": "={{ $json.output.length }}",
              "rightValue": 500,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        768,
        992
      ],
      "id": "ad037a7c-40a0-4d28-b9c9-5c8a488d389e",
      "name": "If"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "–ü—Ä–∏–≤–µ—Ç, –∫–æ–º–∏–∫—Å-–≥–µ—Ä–æ–π –æ—Ç –∫–æ–º–∞–Ω–¥—ã Akadem Choombas! ü¶∏  –Ø –ø—Ä–µ–≤—Ä–∞—â—É –ª—é–±–æ–π —Å–∫—É—á–Ω—ã–π PDF –≤ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–∏–∫—Å –ø—Ä–æ –û—Ç—Ü–∞ –∏ –°—ã–Ω–∞.  –ü—Ä–æ—Å—Ç–æ –∑–∞–∫–∏–¥—ã–≤–∞–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Å–¥–µ–ª–∞–µ–º –º—ã! üìö‚ú®",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -32,
        1104
      ],
      "id": "9e8891b1-9169-4259-96ea-46ed4b87b3f5",
      "name": "Send a text message2",
      "webhookId": "9ec2bc9f-5ce8-449c-860d-d0926908c8ac",
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "FNd5VUe1tZm8dvAH",
          "name": "AkademChoombas_bot"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Read PDF",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read PDF": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request - Generate": {
      "main": [
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Convert to File1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GenearteJSON": {
      "main": [
        [
          {
            "node": "HTTP Request - Generate",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a photo message": {
      "main": [
        []
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Send a photo message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "GenearteJSON",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "43944d18-28d9-4579-b1bf-4150af0eec46",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "83ceb29df94fc3072e3643d7fccc65cf595425deaa9cda5b2b8f17a94ed1d404"
  },
  "id": "lSS3E4WPFuc7airh",
  "tags": []
}
